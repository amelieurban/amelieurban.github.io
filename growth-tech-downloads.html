<!doctype html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-54ZJD9CZ');</script>
  <!-- End Google Tag Manager -->

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Download — Growth Tech</title>
  <meta name="description" content="Growth Tech downloads" />

  <link rel="preconnect" href="https://fonts.googleapis.com" />
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700&family=Source+Sans+3:wght@300;400;500;600&display=swap" rel="stylesheet" />

  <style>
    :root{
      --bg:#f3eee7;
      --ink:#1b1b1b;
      --muted:#6c645b;
      --accent:#111111;
      --line:#e2dad0;
      --card:#ffffff;
      --radius:24px;
      --maxw:720px;
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:"Source Sans 3", "Helvetica Neue", Helvetica, Arial, sans-serif;
      color:var(--ink);
      background:linear-gradient(180deg, #f7f3ee 0%, #f0e9df 100%);
      text-rendering:optimizeLegibility;
      -webkit-font-smoothing:antialiased;
    }
    a{color:inherit}
    .page{max-width:var(--maxw); margin-inline:auto; padding:70px 24px 90px}

    header{
      display:flex;
      align-items:center;
      gap:12px;
      margin-bottom:28px;
    }
    .back-link{
      text-decoration:none;
      border-bottom:1px solid currentColor;
      font-size:14px;
    }

    .title{
      font-family:"Playfair Display", "Times New Roman", Times, serif;
      font-weight:500;
      font-size:clamp(30px, 4vw, 46px);
      margin:0 0 12px;
    }
    .lead{color:var(--muted); font-size:18px; margin:0 0 28px}

    .card{
      background:var(--card);
      border:1px solid var(--line);
      border-radius:var(--radius);
      padding:30px;
      box-shadow:0 18px 38px rgba(0,0,0,0.08);
    }

    .form{display:grid; gap:18px}
    .field{display:grid; gap:8px}
    label{font-size:14px; font-weight:600}
    input[type="text"],
    input[type="email"],
    select{
      width:100%;
      padding:12px 14px;
      border-radius:12px;
      border:1px solid var(--line);
      font-size:15px;
      background:#fff;
    }
    select{appearance:none; background-image:linear-gradient(45deg, transparent 50%, #666 50%), linear-gradient(135deg, #666 50%, transparent 50%); background-position:calc(100% - 18px) 17px, calc(100% - 12px) 17px; background-size:6px 6px, 6px 6px; background-repeat:no-repeat; padding-right:34px}

    .consent{display:flex; gap:10px; align-items:flex-start; font-size:13px; color:var(--muted)}
    .consent input{margin-top:2px}

    .btn{
      display:inline-flex;
      align-items:center;
      justify-content:center;
      padding:14px 30px;
      border-radius:999px;
      text-decoration:none;
      font-size:13px;
      letter-spacing:0.2em;
      text-transform:uppercase;
      background:var(--accent);
      color:#fff;
      border:1px solid var(--accent);
      cursor:pointer;
      transition:all 0.25s ease;
    }
    .btn:hover{background:transparent; color:var(--accent); transform:translateY(-2px)}

    .msg{min-height:20px; font-size:13px; color:var(--muted); text-align:center}

    .download-box{
      margin-top:26px;
      border:1px dashed var(--line);
      border-radius:18px;
      padding:20px;
    }
    .download-box h3{margin:0 0 8px; font-size:18px}
    .download-box p{margin:0 0 16px; color:var(--muted)}

    .hidden{display:none}

    .fine-print{
      margin-top:24px;
      font-size:12px;
      color:var(--muted);
      text-align:center;
    }
  </style>
</head>

<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-54ZJD9CZ"
  height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
  <!-- End Google Tag Manager (noscript) -->

  <main class="page">
    <header>
      <a class="back-link" href="growth-tech.html">← Back to Growth Tech</a>
    </header>

    <h1 id="headline" class="title">Unlock your download</h1>
    <p class="lead">Fill in your details to unlock the download. Both downloads are gated via a short form.</p>

    <section class="card">
      <form id="leadForm" class="form">
        <div class="field">
          <label for="email">Email Address *</label>
          <input id="email" type="email" placeholder="e.g. alex@company.com" required />
        </div>

        <div class="field">
          <label for="role">Your Role *</label>
          <select id="role" required>
            <option disabled selected value="">Select your role</option>
            <option value="student">Student</option>
            <option value="marketer">Growth Marketer</option>
            <option value="hacker">Growth Hacker</option>
            <option value="recruiter">Recruiter</option>
            <option value="founder">Founder</option>
            <option value="other">Other</option>
          </select>
        </div>

        <div class="field">
          <label for="company">Company (Optional)</label>
          <input id="company" type="text" placeholder="e.g. Acme Corp" />
        </div>

        <label class="consent" for="consent">
          <input id="consent" type="checkbox" required />
          I agree to be contacted regarding growth and product-related insights. *
        </label>

        <button class="btn" type="submit">Unlock download</button>
        <p id="msg" class="msg"></p>
      </form>

      <div id="downloadBox" class="download-box hidden">
        <h3>Download unlocked ✅</h3>
        <p id="downloadText"></p>
        <a id="downloadLink" class="btn" href="#" download>Download</a>
        <p class="fine-print">If the download doesn’t start, right‑click and choose “Save link as…”.</p>
      </div>
    </section>

    <p class="fine-print">By clicking subscribe, you agree to our Terms of Service and Privacy Policy. We respect your inbox.</p>
  </main>

  <script>
    // 0) Se till att man kommer från "unlocked" Growth Tech
    if (sessionStorage.getItem('growthtech_unlocked') !== '1') {
      window.location.href = 'growth-tech.html';
    }

    // 1) Vilken asset vill vi låsa upp?
    const params = new URLSearchParams(window.location.search);
    const asset = params.get('asset') || 'pdf'; // 'zip' eller 'pdf'

    const ASSETS = {
      zip: {
        title: "Download the Chrome extension (ZIP)",
        text: "You can now download the extension ZIP and install it via chrome://extensions → Load unpacked.",
        href: "downloads/price-predictor-extension.zip",
        filename: "price-predictor-extension.zip"
      },
      pdf: {
        title: "Download the guide about how small technical implementations leads to exponential growth (PDF)",
        text: "You can now download the PDF guide: Technical Leverage and Exponential Growth.",
        href: "downloads/Technical-Leverage-and-Exponential-Growth.pdf",
        filename: "Technical-Leverage-and-Exponential-Growth.pdf"
      }
    };

    const chosen = ASSETS[asset] || ASSETS.pdf;
    document.getElementById('headline').textContent = chosen.title;

    // 2) Form submit => spara i Google Sheets + lås upp download
    const form = document.getElementById('leadForm');
    const msg = document.getElementById('msg');
    const downloadBox = document.getElementById('downloadBox');
    const downloadText = document.getElementById('downloadText');
    const downloadLink = document.getElementById('downloadLink');

    form.addEventListener('submit', async (e) => {
      e.preventDefault();

      const payload = {
        email: document.getElementById('email').value.trim(),
        role: document.getElementById('role').value,
        company: document.getElementById('company').value.trim(),
        consent: document.getElementById('consent').checked,
        asset,
        timestamp: new Date().toISOString(),
        page: window.location.href,
        userAgent: navigator.userAgent
      };

      const endpoint = "https://script.google.com/macros/s/AKfycbzDww456IiMHQ7-UH2kIqUNmUU6F2Qq90FhU8aOfifrRIESnz78BnrIIsKOWRC4KfHP0A/exec";

      try {
        await fetch(endpoint, {
          method: "POST",
          headers: { "Content-Type": "text/plain;charset=utf-8" },
          body: JSON.stringify(payload)
        });
      } catch (err) {
        msg.textContent = "Could not save your details right now. Please try again.";
        console.error(err);
        return;
      }

      if (window.dataLayer) window.dataLayer.push({ event: 'lead_submit', asset, role: payload.role });

      msg.textContent = "Thanks! Download unlocked ✅";
      downloadText.textContent = chosen.text;
      downloadLink.href = chosen.href;
      downloadLink.setAttribute("download", chosen.filename);
      downloadBox.classList.remove('hidden');
      downloadBox.scrollIntoView({ behavior: "smooth", block: "start" });
    });
  </script>

  <script src="data-layer.js"></script>
</body>
</html>
